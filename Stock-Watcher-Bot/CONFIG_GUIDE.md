# 📊 股票监控系统配置文档

## 🎯 系统概述

这是一个基于 GitHub Actions 的完全自动化股票监控与提醒系统，专门为**南方中证 500ETF**设计。系统每天上午 10:00 自动执行，通过新浪财经 API 获取实时价格，根据预设的分层交易规则生成智能决策，并通过微信公众号推送投资建议。

## 📋 配置文件结构 (config.json)

```json
[
  {
    "name": "南方中证500ETF",
    "code": "sh510500",
    "base_price": 6.0,
    "buy_price": 5.8,
    "sell_rules": [
      {
        "trigger_percent_increase": 5.0,
        "sell_percent_of_position": 20.0
      },
      {
        "trigger_percent_increase": 10.0,
        "sell_percent_of_position": 30.0
      },
      {
        "trigger_percent_increase": 15.0,
        "sell_percent_of_position": 40.0
      },
      {
        "trigger_percent_increase": 20.0,
        "sell_percent_of_position": 50.0
      }
    ],
    "note": "中盘股核心配置，跟踪中证500指数"
  }
]
```

## 🔧 字段说明

### 基本信息

- **`name`** (str): 股票的中文名称，用于显示和报告
- **`code`** (str): 股票代码，遵循新浪财经格式 (如 sh510500)
- **`note`** (str): 个人备注，投资理念或重要提醒

### 价格设定

- **`base_price`** (float): 基准价格，用于计算涨跌幅的参考点
- **`buy_price`** (float): 价值买入触发价，当前价 ≤ 此价格时触发买入信号

### 分层卖出规则

- **`sell_rules`** (array): 分层纪律卖出规则列表
  - **`trigger_percent_increase`** (float): 从 base_price 上涨的百分比触发点
  - **`sell_percent_of_position`** (float): 触发后建议卖出当前仓位的百分比

## 🧠 核心交易逻辑

### 1. 🔴 价值买入

**触发条件**: 当前价格 ≤ buy_price
**决策建议**: 价值买入机会
**示例**: 当前价格 ¥5.75 ≤ 买入价 ¥5.80

### 2. 🟢 分层纪律卖出

**触发条件**: 涨幅达到任一 sell_rules 规则
**决策逻辑**: 选择已达成的最高涨幅规则
**示例**:

- 涨幅 +6.17% → 触发 +5% 规则，建议卖出 20% 仓位
- 涨幅 +12.5% → 触发 +10% 规则，建议卖出 30% 仓位

### 3. 🟡 持仓观察

**触发条件**: 未达到任何买入或卖出条件
**决策建议**: 继续持有，关注市场变化

## 📊 示例分析流程

假设当前南方中证 500ETF 价格为 ¥6.37：

1. **价格获取**: 从新浪财经 API 获取实时价格 ¥6.37
2. **涨幅计算**: (6.37 - 6.0) / 6.0 × 100% = +6.17%
3. **规则匹配**: 6.17% ≥ 5.0%，触发第一条卖出规则
4. **决策输出**: 🟢 纪律卖出 - 触发 +5% 规则，建议卖出 20% 仓位

## 📱 报告格式

### 动态标题

- **有操作机会**: "🚨 投资提醒！发现 N 项操作机会"
- **无操作机会**: "📈 投资仪表盘日报"

### 报告内容

```
📅 报告时间: 2025-07-25 10:00:00
📊 监控标的: 1 只
⚡ 操作机会: 1 项

========================================

【1】南方中证500ETF (sh510500)
💰 现价: ¥6.370
📐 基准: ¥6.000
📈 涨幅: +6.17%
🎯 决策: 🟢 纪律卖出
📝 说明: 触发 +5.0% 规则，建议卖出 20.0% 仓位
💭 备注: 中盘股核心配置，跟踪中证500指数

========================================
🤖 本报告由股票监控系统自动生成
⚠️  投资有风险，决策需谨慎
```

## ⚙️ 系统特性

### ✅ 核心功能

- 🕙 **定时执行**: 每天上午 10:00 自动运行
- 📡 **实时数据**: 新浪财经 API 获取准确价格
- 🎯 **智能决策**: 基于预设规则的自动化分析
- 📱 **微信推送**: 支持多用户同时接收报告
- 🔒 **安全可靠**: GitHub Secrets 保护敏感信息

### 🔧 技术架构

- **平台**: GitHub Actions (免费、稳定)
- **语言**: Python 3.9+
- **API**: 新浪财经实时数据接口
- **通知**: 微信公众号模板消息
- **配置**: JSON 格式，易于维护

## 🚀 部署指南

1. **配置 GitHub Secrets**:

   - `WECHAT_APP_ID`: 微信公众号 AppID
   - `WECHAT_APP_SECRET`: 微信公众号 AppSecret
   - `WECHAT_TEMPLATE_ID`: 微信模板消息 ID
   - `WECHAT_USER_OPENID1`: 用户 OpenID（支持 1-20 个用户）

2. **修改配置文件**: 根据投资策略调整 `config.json`

3. **启用定时任务**: GitHub Actions 工作流自动执行

## ⚠️ 风险提醒

- 本系统仅提供投资参考，不构成投资建议
- 投资决策应结合个人风险承受能力
- 市场有风险，投资需谨慎
- 建议定期审查和调整投资策略
