# 📊 股票监控与提醒系统

一个基于GitHub Actions的全自动股票监控系统，支持微信公众号模板消息推送。

## 🎯 功能特点

- **全自动监控**：每天北京时间上午10:00自动运行
- **智能决策**：分层买入/卖出策略
- **微信推送**：支持多种模板格式，确保消息送达
- **安全可靠**：使用GitHub Secrets管理敏感信息

## 📈 监控配置

当前监控股票：**南方中证500ETF (sh510500)**

### 交易策略
- **买入策略**：
  - 下跌 5% 时投入 20% 资金
  - 下跌 10% 时投入 30% 资金
- **卖出策略**：
  - 上涨 15% 时卖出 20% 仓位
  - 上涨 30% 时卖出 30% 仓位

## 🔧 配置步骤

### 1. GitHub Secrets 设置
在仓库的 Settings > Secrets and variables > Actions 中添加：

```
WECHAT_APP_ID          # 微信公众号AppID
WECHAT_APP_SECRET      # 微信公众号AppSecret  
WECHAT_TEMPLATE_ID     # 微信模板消息ID
WECHAT_USER_OPENID1    # 接收用户的OpenID
```

### 2. 微信模板配置
在微信公众平台申请模板消息，模板应包含以下字段：

**主要字段（11个）：**
```
时间：{{时间.DATA}}
标的：{{标的.DATA}}
机会：{{机会.DATA}}
股票名称：{{股票名称.DATA}}
当前价格：{{当前价格.DATA}}
基准价格：{{基准价格.DATA}}
价格涨幅：{{价格涨幅.DATA}}
投资决策：{{投资决策.DATA}}
操作建议：{{操作建议.DATA}}
备注：{{备注.DATA}}
提醒：{{提醒.DATA}}
```

**备用格式（标准4字段）：**
```
{{first.DATA}}
{{keyword1.DATA}}
{{keyword2.DATA}}
{{remark.DATA}}
```

## 📱 消息示例

当触发买入信号时，您将收到如下消息：

```
📊 时间: 10:00
📈 标的: 1只  
⚡ 机会: 1项

股票名称: 南方中证500ETF
当前价格: ¥5.987
基准价格: ¥6.140
价格涨幅: -2.49%
投资决策: 🟢 建议买入
操作建议: 价格下跌2.49%，触发5%买入策略
备注: 中盘股核心配置，跟踪中证500指数
提醒: 投资有风险，决策需谨慎
```

## 🚀 部署说明

1. **Fork 本仓库** 到您的GitHub账户
2. **配置 Secrets** 添加微信相关密钥
3. **申请模板** 在微信公众平台申请模板消息
4. **等待运行** 系统将在每天上午10:00自动执行

## 📁 文件结构

```
Stock-Watcher-Bot/
├── main.py                    # 主程序
├── config.json               # 股票配置
├── requirements.txt          # 依赖包
├── test_template_fields.py   # 模板测试
└── README.md                 # 说明文档
```

## 🔍 故障排除

### 收不到消息？
1. 检查微信模板字段名称是否完全匹配
2. 确认OpenID是否正确
3. 验证模板ID是否有效
4. 查看GitHub Actions运行日志

### 字段不匹配？
系统支持多种模板格式，会自动尝试：
1. 主要11字段格式
2. 标准4字段格式  
3. 单字段格式

### 手动测试
运行测试脚本验证模板结构：
```bash
python test_template_fields.py
```

## ⚠️ 重要提醒

- **投资有风险，决策需谨慎**
- 本系统仅为技术参考，不构成投资建议
- 请根据个人风险承受能力调整策略

## 📞 技术支持

如有问题，请查看：
1. GitHub Actions 运行日志
2. 微信公众平台错误信息
3. 模板字段匹配情况

---

🎉 **享受您的自动化股票监控服务！** 📈
