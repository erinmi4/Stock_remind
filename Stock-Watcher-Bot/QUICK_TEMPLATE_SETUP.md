# 🚀 快速模板测试指南

## 💡 最简单的开始方式

### 步骤 1：在微信公众平台创建最基础的模板

登录 https://mp.weixin.qq.com/ → 模板消息 → 新建模板

**推荐模板内容**：

```
{{first.DATA}}

时间：{{keyword1.DATA}}
内容：{{keyword2.DATA}}

{{remark.DATA}}
```

### 步骤 2：模板参数说明

- `first`: 主标题（🚨 投资提醒！或 📈 投资仪表盘日报）
- `keyword1`: 报告时间（2025-07-25 10:00:00）
- `keyword2`: 股票分析内容（南方中证 500ETF 分析结果）
- `remark`: 底部提醒（投资有风险，决策需谨慎）

### 步骤 3：测试模板 ID

创建完成后，复制模板 ID 到 GitHub Secrets 中的 `WECHAT_TEMPLATE_ID`

### 步骤 4：如果上述模板不工作，尝试这个极简版本

```
{{content.DATA}}
```

只有一个字段，包含所有信息。

## 🔧 程序已经自动适配

我们的程序会自动尝试多种模板格式：

1. **标准格式**：first + keyword1 + keyword2 + remark
2. **详细格式**：title + report_time + stock_count + action_count + content + tip
3. **极简格式**：content（只有一个字段）

如果第一种格式失败，会自动尝试下一种，直到成功为止。

## 📱 消息效果示例

### 有操作机会时：

```
🚨 投资提醒！发现1项操作机会

时间：2025-07-25 10:00:00
内容：【南方中证500ETF】现价¥6.89，涨幅+12.21%，🟢纪律卖出，建议卖出30%仓位

📊 投资有风险，决策需谨慎
```

### 无操作机会时：

```
📈 投资仪表盘日报

时间：2025-07-25 10:00:00
内容：【南方中证500ETF】现价¥6.35，涨幅+3.42%，🟡持仓观察，未触发交易条件

📊 投资有风险，决策需谨慎
```

## ⚡ 快速部署检查清单

- [ ] 微信公众号已申请并通过认证
- [ ] 模板消息功能已开通
- [ ] 创建了基础模板（建议先用标准格式）
- [ ] 获得了模板 ID
- [ ] 在 GitHub Secrets 中配置了：
  - [ ] WECHAT_APP_ID
  - [ ] WECHAT_APP_SECRET
  - [ ] WECHAT_TEMPLATE_ID
  - [ ] WECHAT_USER_OPENID1 （你的 OpenID）
- [ ] 测试程序运行正常

## 🚨 常见问题解决

### 1. errcode: 40001 - 模板不存在或字段不匹配

- 检查模板 ID 是否正确
- 确认模板已审核通过
- 尝试使用极简模板格式

### 2. errcode: 40003 - OpenID 错误

- 确认用户已关注公众号
- 检查 OpenID 格式是否正确

### 3. errcode: 41030 - 缺少 template_id

- 确认 GitHub Secrets 中设置了 WECHAT_TEMPLATE_ID

### 4. 接收不到消息

- 检查用户是否关注了公众号
- 确认模板消息权限已开通
- 查看微信公众平台的发送记录

现在可以测试了！🎉
